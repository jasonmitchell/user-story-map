(this["webpackJsonpuser-story-map"]=this["webpackJsonpuser-story-map"]||[]).push([[0],{31:function(e,t,n){"use strict";n.r(t);var r,c=n(1),a=n.n(c),i=n(11),d=n.n(i),s=n(2),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},u=n(3),l=Object(s.b)(r||(r=Object(u.a)(["\n  html {\n    box-sizing: border-box;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n    font-size: 18px;\n    line-height: 1.5;\n    display: flex;\n  }\n\n  textarea {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  }\n\n  body {\n    margin: 0;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  *, *:before, *:after {\n    box-sizing: inherit;\n  }\n"]))),f=n(5);function b(){return Math.random().toString(36).substr(2,9)}var p,j,h,x,y,O,v,m,I=n(4),g=n(16),k=n(6),w=n(15),C=n.n(w),S=n(0),A=s.c.div(p||(p=Object(u.a)(["\n  /* position: relative; */\n  display: grid;\n  width: 294px;\n  grid-template-columns: 18px ",' 18px;\n  grid-template-rows: 18px min-content min-content 18px;\n  grid-template-areas:\n    ". top ."\n    "left card right"\n    ". toolbar ."\n    ". bottom .";\n  justify-items: center;\n  align-items: center;\n\n  &:hover, &:focus-within {\n    button {\n      visibility: visible;\n    }\n  }\n'])),(function(e){return e.theme.cardWidth})),M=s.c.article(j||(j=Object(u.a)(["\n  border: 1px solid ",";\n  border-left: 4px solid ",";\n  border-radius: 3px;\n  background: ",";\n  width: 100%;\n  grid-area: card;\n  padding: 0.25em;\n  cursor: pointer;\n"])),(function(e){return e.theme.cards.typeAccents[e.type]}),(function(e){return e.theme.cards.typeAccents[e.type]}),(function(e){return e.theme.cards.background})),B=s.c.div(h||(h=Object(u.a)(["\n  grid-area: card;\n"]))),E=Object(s.c)(C.a).attrs((function(e){return{type:"text",value:e.title,placeholder:e.placeholder,maxLength:400}}))(x||(x=Object(u.a)(["\n  width: 100%;\n  max-width: 100%;\n  border: none;\n  outline: none;\n  font-size: 0.85em;\n  resize: none;\n"]))),F=s.c.div(y||(y=Object(u.a)(["\n  grid-area: toolbar;\n  background: ",";\n  border: 1px solid ",";\n  border-left: 4px solid ",";\n  padding: 0.5em;\n  width: 100%;\n"])),(function(e){return e.theme.cards.background}),(function(e){return e.theme.subtle}),(function(e){return e.theme.subtle})),U=s.c.button.attrs((function(e){return{type:"button"}}))(O||(O=Object(u.a)(["\n  transition: background-color .3s ease, color .3s ease;\n  background: transparent;\n  border: none;\n  color: ",";\n  font-size: 1em;\n  line-height: 1em;\n  padding: 0;\n  margin: 0.1em;\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  border-radius: 50%;\n  outline: none;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n"])),(function(e){return e.theme.subtle}),(function(e){return e.theme.accent}),(function(e){return e.theme.accentText}));function D(e){var t=e.onClick,n=Object(k.a)(e,["onClick"]);return Object(S.jsx)(U,Object(I.a)(Object(I.a)({},n),{},{onClick:t,children:"+"}))}var z=Object(s.c)(D)(v||(v=Object(u.a)(["\n  grid-area: ",";\n"])),(function(e){return"story"===e.type?"top":"left"})),N=Object(s.c)(D)(m||(m=Object(u.a)(["\n  grid-area: ",";\n"])),(function(e){return"story"===e.type?"bottom":"right"})),R="add-activity",T="add-task",J="add-story",L="update-card",H="delete-activity",P="delete-task",W="delete-story";function q(e){var t=e.id,n=e.title,r=e.type,a=e.onAddBefore,i=e.onAddAfter,d=e.dispatch,s=Object(c.useRef)(null),o=Object(c.useState)(!1),u=Object(f.a)(o,2),l=u[0],b=u[1];return Object(S.jsxs)(A,{onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)},children:[Object(S.jsx)(M,{type:r,onClick:function(){return s.current.focus()},children:Object(S.jsx)(E,{ref:s,title:n,placeholder:"New ".concat(r,"..."),onChange:function(e){d({type:L,cardId:t,title:e.target.value})}})}),a&&Object(S.jsx)(z,{type:r,onClick:a}),i&&Object(S.jsx)(N,{type:r,onClick:i}),l&&Object(S.jsx)(F,{children:Object(S.jsx)("button",{type:"button",onClick:function(){d({type:"activity"===r?H:"task"===r?P:W,cardId:t})},children:"Delete"})})]})}function G(e){var t=e.dispatch,n=Object(k.a)(e,["dispatch"]),r=n.index;return Object(S.jsx)(q,Object(I.a)(Object(I.a)({},n),{},{dispatch:t,onAddBefore:function(){return t({type:R,activityIndex:r})},onAddAfter:function(){return t({type:R,activityIndex:r+1})}}))}function K(e){var t=e.dispatch,n=Object(k.a)(e,["dispatch"]),r=n.activityId,c=n.index;return Object(S.jsx)(q,Object(I.a)(Object(I.a)({},n),{},{dispatch:t,onAddBefore:function(){return t({type:T,activityId:r,taskIndex:c})},onAddAfter:function(){return t({type:T,activityId:r,taskIndex:c+1})}}))}function Q(e){var t=e.dispatch,n=Object(k.a)(e,["dispatch"]),r=n.releaseId,c=n.taskId,a=n.index;return Object(S.jsx)(q,Object(I.a)(Object(I.a)({},n),{},{dispatch:t,onAddBefore:function(){return t({type:J,releaseId:r,taskId:c,storyIndex:a})},onAddAfter:function(){return t({type:J,releaseId:r,taskId:c,storyIndex:a+1})}}))}function V(e){var t=e.children;return Object(S.jsx)(A,{children:Object(S.jsx)(B,{children:t})})}function X(e,t,n,r){e.filter((function(e){return 0===e.id.indexOf(t)&&e.index>=n&&(!r||r(e))})).forEach((function(e){e.index+=1}))}function Y(e){var t=0;e.sort((function(e,t){return e.index-t.index})).forEach((function(e){e.index=t++}))}function Z(e,t){var n=[];return e.forEach((function(e,r){!0===t(e)&&n.push(r)})),n}var $=function(e,t){var n=e.cards.findIndex((function(e){return e.id===t})),r=e.cards[n];return Z(e.cards,(function(e){return e.taskId===t})).forEach((function(t){e.cards.splice(t,1)})),e.cards.splice(n,1),r};function _(e,t){switch(t.type){case R:X(e.cards,"activity",t.activityIndex),e.cards.push({id:"activity-".concat(b()),type:"activity",title:"",index:t.activityIndex});break;case T:X(e.cards,"task",t.taskIndex,(function(e){return e.activityId===t.activityId})),e.cards.push({id:"task-".concat(b()),type:"task",activityId:t.activityId,title:"",index:t.taskIndex});break;case J:X(e.cards,"story",t.storyIndex,(function(e){return e.taskId===t.taskId&&e.releaseId===t.releaseId})),e.cards.push({id:"story-".concat(b()),type:"story",releaseId:t.releaseId,taskId:t.taskId,title:"",index:t.storyIndex});break;case L:e.cards.find((function(e){return e.id===t.cardId})).title=t.title;break;case H:!function(e,t){var n=e.cards.findIndex((function(e){return e.id===t})),r=e.cards[n];Z(e.cards,(function(e){return e.activityId===r.id})).map((function(t){return e.cards[t].id})).forEach((function(t){$(e.cards,t)})),e.cards.splice(n,1)}(e,t.cardId),Y(e.cards.filter((function(e){return"activity"===e.type})));break;case P:var n=$(e,t.cardId);Y(e.cards.filter((function(e){return e.activityId===n.activityId})));break;case W:var r=e.cards.findIndex((function(e){return e.id===t.cardId})),c=e.cards[r];e.cards.splice(r,1),Y(e.cards.filter((function(e){return e.taskId===c.taskId&&e.releaseId===c.releaseId})));break;case"add-release":e.releases.splice(t.index,0,{id:b(),name:""});break;case"update-release":e.releases.find((function(e){return e.id===t.releaseId})).name=t.name;break;case"delete-release":!function(e,t){var n=e.releases.findIndex((function(e){return e.id===t})),r=e.releases[n<e.releases.length-1?n+1:n-1];e.releases.splice(n,1);var c=e.cards.filter((function(e){return e.releaseId===r.id})).length;e.cards.filter((function(e){return e.releaseId===t})).forEach((function(e){e.releaseId=r.id,e.index=c++}))}(e,t.releaseId);break;case"move-release-up":!function(e,t){var n=e.releases.findIndex((function(e){return e.id===t}));if(0!==n){var r=e.releases[n],c=e.releases[n-1];e.releases[n-1]=r,e.releases[n]=c}}(e,t.releaseId);break;case"move-release-down":!function(e,t){var n=e.releases.findIndex((function(e){return e.id===t}));if(n!==e.releases.length-1){var r=e.releases[n],c=e.releases[n+1];e.releases[n+1]=r,e.releases[n]=c}}(e,t.releaseId);break;default:throw new Error("Unknown action type")}}var ee,te,ne,re,ce={releases:[{id:"release-".concat(b()),name:"Backlog"}],cards:[]},ae=s.c.section(ee||(ee=Object(u.a)(["\n  border-top: 1px solid #cccccc;\n"])));function ie(e){var t=e.id,n=e.index,r=e.name,c=e.canDelete,a=e.children,i=e.dispatch;return Object(S.jsxs)(ae,{children:[Object(S.jsxs)("header",{children:[Object(S.jsx)("input",{type:"text",value:r,autoFocus:!0,onChange:function(e){i({type:"update-release",releaseId:t,name:e.target.value})}}),Object(S.jsx)("button",{type:"button",onClick:function(){return i({type:"add-release",index:n})},children:"Add Release Above"}),Object(S.jsx)("button",{type:"button",onClick:function(){return i({type:"add-release",index:n+1})},children:"Add Release Below"}),Object(S.jsx)("button",{type:"button",onClick:function(){return i({type:"move-release-up",releaseId:t})},children:"Move Up"}),Object(S.jsx)("button",{type:"button",onClick:function(){return i({type:"move-release-down",releaseId:t})},children:"Move Down"}),c&&Object(S.jsx)("button",{type:"button",onClick:function(){return i({type:"delete-release",releaseId:t})},children:"Delete"})]}),Object(S.jsx)("div",{children:a})]})}var de=s.c.div(te||(te=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  max-height: 100vh;\n  min-width: 100vw;\n  background: ",";\n  padding: 0.5em;\n"])),(function(e){return e.theme.background})),se=s.c.div(ne||(ne=Object(u.a)(["\n  display: flex;\n"]))),oe=s.c.div(re||(re=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n"])));function ue(e,t){return e.filter((function(e){return 0===e.id.indexOf(t)})).sort((function(e,t){return e.index-t.index}))}function le(e,t){return e.filter((function(e){return e.activityId===t.id}))}var fe,be,pe,je=function(e){var t=e.map,n=e.onMapUpdated,r=Object(g.a)(_,t||ce),a=Object(f.a)(r,2),i=a[0],d=a[1],s=i.releases,o=i.cards,u=ue(o,"activity"),l=ue(o,"task"),b=ue(o,"story");return Object(c.useEffect)((function(){n(i)}),[n,i,t]),Object(S.jsxs)(de,{children:[Object(S.jsxs)(se,{children:[0===u.length&&Object(S.jsx)(V,{children:Object(S.jsx)(D,{onClick:function(){return d({type:R,activityIndex:0})}})}),u.map((function(e){var t=le(l,e);return Object(S.jsxs)(se,{children:[Object(S.jsx)(G,Object(I.a)({dispatch:d},e)),t.map((function(t,n){return n>0&&Object(S.jsx)(V,{},"".concat(e.id,"-").concat(t.id,"-spacer"))}))]},e.id)}))]}),Object(S.jsx)(se,{children:u.map((function(e){var t=le(l,e);return Object(S.jsxs)(se,{children:[0===t.length&&Object(S.jsx)(V,{children:Object(S.jsx)(D,{onClick:function(){return d({type:T,activityId:e.id,taskIndex:0})}})}),t.length>0&&t.map((function(e){return Object(S.jsx)(K,Object(I.a)({dispatch:d},e),e.id)}))]},"".concat(e.id,"-tasks"))}))}),s.map((function(e,t){var n=b.filter((function(t){return t.releaseId===e.id}));return Object(S.jsx)(ie,Object(I.a)(Object(I.a)({index:t,dispatch:d,canDelete:s.length>1},e),{},{children:Object(S.jsx)(se,{children:u.map((function(t){return le(l,t).map((function(t){var r=n.filter((function(e){return e.taskId===t.id}));return Object(S.jsxs)(oe,{children:[0===r.length&&Object(S.jsx)(V,{children:Object(S.jsx)(D,{onClick:function(){return d({type:J,releaseId:e.id,taskId:t.id,storyIndex:0})}})}),r.length>0&&r.map((function(e){return Object(S.jsx)(Q,Object(I.a)({dispatch:d},e),e.id)}))]},"".concat(t.id,"-stories"))}))}))})}),e.id)}))]})},he=s.c.div(fe||(fe=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  min-width: 100vw;\n  height: 100vh;\n  max-height: 100vh;\n"]))),xe=s.c.header(be||(be=Object(u.a)(["\n  background: ",";\n  color: ",";\n"])),(function(e){return e.theme.header}),(function(e){return e.theme.accentText})),ye=s.c.section(pe||(pe=Object(u.a)(["\n  flex: 1;\n  overflow: auto;\n  padding-top: 0.5em;\n"])));function Oe(e){localStorage.setItem("map",JSON.stringify(e))}var ve=JSON.parse(localStorage.getItem("map"));var me=function(){var e=Object(c.useState)(b()),t=Object(f.a)(e,2),n=t[0],r=t[1];return Object(S.jsxs)(he,{children:[Object(S.jsxs)(xe,{children:["User Story Map",Object(S.jsx)("button",{type:"button",onClick:function(){localStorage.removeItem("map"),ve=null,r(b())},children:"Clear"})]}),Object(S.jsx)(ye,{children:Object(S.jsx)(je,{map:ve,onMapUpdated:Oe},n)})]})};d.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsxs)(s.a,{theme:{background:"#ffffff",accent:"#7310fa",accentText:"#ffffff",subtle:"#cccccc",header:"#7310fa",cardWidth:"250px",cards:{background:"#ffffff",typeAccents:{activity:"#fac710",task:"#2d9bf0",story:"#18c427"}}},children:[Object(S.jsx)(l,{}),Object(S.jsx)(me,{})]})}),document.getElementById("root")),o()}},[[31,1,2]]]);
//# sourceMappingURL=main.72a91f31.chunk.js.map