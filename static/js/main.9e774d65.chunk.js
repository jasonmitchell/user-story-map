(this["webpackJsonpuser-story-map"]=this["webpackJsonpuser-story-map"]||[]).push([[0],{31:function(e,n,t){"use strict";t.r(n);var r,c=t(1),i=t.n(c),a=t(11),d=t.n(a),o=t(2),s=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,32)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),r(e),c(e),i(e),a(e)}))},u=t(3),l=Object(o.b)(r||(r=Object(u.a)(["\n  html {\n    box-sizing: border-box;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n    font-size: 18px;\n    line-height: 1.5;\n    display: flex;\n  }\n\n  textarea {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  }\n\n  body {\n    margin: 0;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  *, *:before, *:after {\n    box-sizing: inherit;\n  }\n"]))),f=t(6);function b(){return Math.random().toString(36).substr(2,9)}var j,h,p,x,O,v,y,m,g=t(4),I=t(16),k=t(7),A=t(15),w=t.n(A),C=t(0),S=o.c.div(j||(j=Object(u.a)(['\n  width: 100%;\n  display: grid;\n  grid-template-columns: min-content auto min-content;\n  grid-template-rows: min-content auto min-content;\n  gap: 0em;\n  grid-template-areas:\n    "top top top"\n    "left card right"\n    "bottom bottom bottom";\n  justify-items: center;\n  align-items: center;\n']))),B=o.c.article(h||(h=Object(u.a)(["\n  border: 1px solid ",";\n  border-left: 4px solid ",";\n  border-radius: 3px;\n  background: ",";\n  width: 100%;\n  grid-area: card;\n  padding: 0.25em;\n  cursor: pointer;\n\n  &:hover, &:focus-within {\n    box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n  }\n"])),(function(e){return e.theme.cards.typeAccents[e.type]}),(function(e){return e.theme.cards.typeAccents[e.type]}),(function(e){return e.theme.cards.background})),R=Object(o.c)(w.a).attrs((function(e){return{type:"text",autoFocus:!0,value:e.title,placeholder:e.placeholder,maxLength:400}}))(p||(p=Object(u.a)(["\n  width: 100%;\n  max-width: 100%;\n  border: none;\n  outline: none;\n  font-size: 0.85em;\n  resize: none;\n"]))),L=o.c.button.attrs((function(e){return{type:"button"}}))(x||(x=Object(u.a)(["\n  transition: all .3s ease;\n  background: transparent;\n  border: none;\n  color: ",";\n  font-size: 1.25em;\n  line-height: 1.25em;\n  padding: 0;\n  margin: 0.1em;\n  width: 36px;\n  height: 36px;\n  cursor: pointer;\n  border-radius: 50%;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n"])),(function(e){return e.theme.subtle}),(function(e){return e.theme.accent}),(function(e){return e.theme.accentText})),F=Object(o.c)(L)(O||(O=Object(u.a)(["\n  grid-area: top;\n"]))),E=Object(o.c)(L)(v||(v=Object(u.a)(["\n  grid-area: bottom;\n"]))),M=Object(o.c)(L)(y||(y=Object(u.a)(["\n  grid-area: left;\n"]))),U=Object(o.c)(L)(m||(m=Object(u.a)(["\n  grid-area: right;\n"]))),D="add-activity",N="add-task",z="add-story",T="update-card",J="delete-activity",W="delete-task",H="delete-story";function P(e){var n=e.id,t=e.index,r=e.title,i=e.type,a=e.onAddAbove,d=e.onAddBelow,o=e.onAddLeft,s=e.onAddRight,u=e.dispatch;var l=Object(c.useRef)(null);return Object(C.jsxs)(S,{children:[Object(C.jsxs)(B,{type:i,onClick:function(){return l.current.focus()},children:[Object(C.jsx)(R,{ref:l,title:r,placeholder:"New ".concat(i,"..."),onChange:function(e){u({type:T,cardId:n,title:e.target.value})}}),Object(C.jsx)("button",{type:"button",onClick:function(){u({type:"activity"===i?J:"task"===i?W:H,cardId:n})},children:"Delete"})]}),d&&Object(C.jsx)(E,{onClick:d,children:"+"}),s&&Object(C.jsx)(U,{onClick:s,children:"+"}),a&&0===t&&Object(C.jsx)(F,{onClick:a,children:"+"}),o&&0===t&&Object(C.jsx)(M,{onClick:o,children:"+"})]})}function q(e){var n=e.onAddLeft,t=e.onAddRight,r=Object(k.a)(e,["onAddLeft","onAddRight"]);return Object(C.jsx)(P,Object(g.a)(Object(g.a)({},r),{},{onAddLeft:n,onAddRight:t,onAddAbove:null,onAddBelow:null}))}function G(e){var n=e.onAddLeft,t=e.onAddRight,r=Object(k.a)(e,["onAddLeft","onAddRight"]);return Object(C.jsx)(P,Object(g.a)(Object(g.a)({},r),{},{onAddLeft:n,onAddRight:t,onAddAbove:null,onAddBelow:null}))}function K(e){var n=e.onAddAbove,t=e.onAddBelow,r=Object(k.a)(e,["onAddAbove","onAddBelow"]);return Object(C.jsx)(P,Object(g.a)(Object(g.a)({},r),{},{onAddLeft:null,onAddRight:null,onAddAbove:n,onAddBelow:t}))}function Q(e,n,t,r){e.filter((function(e){return 0===e.id.indexOf(n)&&e.index>=t&&(!r||r(e))})).forEach((function(e){e.index+=1}))}function V(e){var n=0;e.sort((function(e,n){return e.index-n.index})).forEach((function(e){e.index=n++}))}function X(e,n){var t=[];return e.forEach((function(e,r){!0===n(e)&&t.push(r)})),t}var Y=function(e,n){var t=e.cards.findIndex((function(e){return e.id===n})),r=e.cards[t];return X(e.cards,(function(e){return e.taskId===n})).forEach((function(n){e.cards.splice(n,1)})),e.cards.splice(t,1),r};function Z(e,n){switch(n.type){case D:Q(e.cards,"activity",n.activityIndex),e.cards.push({id:"activity-".concat(b()),type:"activity",title:"",index:n.activityIndex});break;case N:Q(e.cards,"task",n.taskIndex,(function(e){return e.activityId===n.activityId})),e.cards.push({id:"task-".concat(b()),type:"task",activityId:n.activityId,title:"",index:n.taskIndex});break;case z:Q(e.cards,"story",n.storyIndex,(function(e){return e.taskId===n.taskId&&e.releaseId===n.releaseId})),e.cards.push({id:"story-".concat(b()),type:"story",releaseId:n.releaseId,taskId:n.taskId,title:"",index:n.storyIndex});break;case T:e.cards.find((function(e){return e.id===n.cardId})).title=n.title;break;case J:!function(e,n){var t=e.cards.findIndex((function(e){return e.id===n})),r=e.cards[t];X(e.cards,(function(e){return e.activityId===r.id})).map((function(n){return e.cards[n].id})).forEach((function(n){Y(e.cards,n)})),e.cards.splice(t,1)}(e,n.cardId),V(e.cards.filter((function(e){return"activity"===e.type})));break;case W:var t=Y(e,n.cardId);V(e.cards.filter((function(e){return e.activityId===t.activityId})));break;case H:var r=e.cards.findIndex((function(e){return e.id===n.cardId})),c=e.cards[r];e.cards.splice(r,1),V(e.cards.filter((function(e){return e.taskId===c.taskId&&e.releaseId===c.releaseId})));break;case"add-release":e.releases.splice(n.index,0,{id:b(),name:""});break;case"update-release":e.releases.find((function(e){return e.id===n.releaseId})).name=n.name;break;case"delete-release":!function(e,n){var t=e.releases.findIndex((function(e){return e.id===n})),r=e.releases[t<e.releases.length-1?t+1:t-1];e.releases.splice(t,1);var c=e.cards.filter((function(e){return e.releaseId===r.id})).length;e.cards.filter((function(e){return e.releaseId===n})).forEach((function(e){e.releaseId=r.id,e.index=c++}))}(e,n.releaseId);break;case"move-release-up":!function(e,n){var t=e.releases.findIndex((function(e){return e.id===n}));if(0!==t){var r=e.releases[t],c=e.releases[t-1];e.releases[t-1]=r,e.releases[t]=c}}(e,n.releaseId);break;case"move-release-down":!function(e,n){var t=e.releases.findIndex((function(e){return e.id===n}));if(t!==e.releases.length-1){var r=e.releases[t],c=e.releases[t+1];e.releases[t+1]=r,e.releases[t]=c}}(e,n.releaseId);break;default:throw new Error("Unknown action type")}}var $,_,ee,ne,te,re,ce={releases:[{id:"release-".concat(b()),name:"Backlog"}],cards:[]},ie=o.c.section($||($=Object(u.a)(["\n  border-top: 1px solid #cccccc;\n"])));function ae(e){var n=e.id,t=e.name,r=e.canDelete,c=e.children,i=e.onAddAbove,a=e.onAddBelow,d=e.dispatch;return Object(C.jsxs)(ie,{children:[Object(C.jsxs)("header",{children:[Object(C.jsx)("input",{type:"text",value:t,autoFocus:!0,onChange:function(e){d({type:"update-release",releaseId:n,name:e.target.value})}}),Object(C.jsx)("button",{type:"button",onClick:i,children:"Add Release Above"}),Object(C.jsx)("button",{type:"button",onClick:a,children:"Add Release Below"}),Object(C.jsx)("button",{type:"button",onClick:function(){return d({type:"move-release-up",releaseId:n})},children:"Move Up"}),Object(C.jsx)("button",{type:"button",onClick:function(){return d({type:"move-release-down",releaseId:n})},children:"Move Down"}),r&&Object(C.jsx)("button",{type:"button",onClick:function(){return d({type:"delete-release",releaseId:n})},children:"Delete"})]}),Object(C.jsx)("div",{children:c})]})}var de=o.c.div(_||(_=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  max-height: 100vh;\n  min-width: 100vw;\n  background: ",";\n  padding: 0.5em;\n"])),(function(e){return e.theme.background})),oe=o.c.div(ee||(ee=Object(u.a)(["\n  display: flex;\n"]))),se=o.c.div(ne||(ne=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  min-width: ",";\n  max-width: ",";\n"])),(function(e){return e.theme.columnWidth}),(function(e){return e.theme.columnWidth})),ue=o.c.div(te||(te=Object(u.a)(["\n  display: flex;\n"]))),le=o.c.div(re||(re=Object(u.a)(["\n  display: flex;\n"])));function fe(e,n){e({type:D,activityIndex:n})}function be(e,n,t){e({type:N,activityId:n,taskIndex:t})}function je(e,n){e({type:"add-release",index:n})}function he(e,n){return e.filter((function(e){return 0===e.id.indexOf(n)})).sort((function(e,n){return e.index-n.index}))}var pe,xe,Oe,ve=function(e){var n=e.map,t=e.onMapUpdated,r=Object(I.a)(Z,n||ce),i=Object(f.a)(r,2),a=i[0],d=i[1],o=a.releases,s=a.cards,u=he(s,"activity"),l=he(s,"task"),b=he(s,"story");return Object(c.useEffect)((function(){t(a)}),[t,a,n]),Object(C.jsxs)(de,{children:[Object(C.jsxs)(ue,{children:[u.map((function(e){var n=l.filter((function(n){return n.activityId===e.id}));return Object(C.jsxs)("div",{children:[Object(C.jsx)(se,{children:Object(C.jsx)(q,Object(g.a)(Object(g.a)({},e),{},{onAddLeft:function(){return fe(d,e.index)},onAddRight:function(){return fe(d,e.index+1)},dispatch:d}))}),Object(C.jsxs)(le,{children:[n.map((function(n){return Object(C.jsx)(se,{children:Object(C.jsx)(G,Object(g.a)(Object(g.a)({},n),{},{onAddLeft:function(){return be(d,e.id,n.index)},onAddRight:function(){return be(d,e.id,n.index+1)},dispatch:d}))},n.id)})),!n.length&&Object(C.jsx)("button",{type:"button",onClick:function(){return be(d,e.id,0)},children:"+ New Task"})]})]},e.id)})),!u.length&&Object(C.jsx)("button",{type:"button",onClick:function(){return fe(d,0)},children:"+ New Activity"})]}),o.map((function(e,n){var t=b.filter((function(n){return n.releaseId===e.id}));return Object(C.jsx)(ae,Object(g.a)(Object(g.a)({},e),{},{dispatch:d,index:n,canDelete:o.length>1,onAddAbove:function(){return je(d,n)},onAddBelow:function(){return je(d,n+1)},children:Object(C.jsx)(oe,{children:u.map((function(n){var r=l.filter((function(e){return e.activityId===n.id}));return r.length?r.length&&r.map((function(n){var r=t.filter((function(t){return t.releaseId===e.id&&t.taskId===n.id})),c=function(e,n,t,r){return function(r){e({type:z,releaseId:n,taskId:t,storyIndex:r})}}(d,e.id,n.id);return Object(C.jsxs)(se,{children:[r.map((function(e,n){return Object(C.jsx)(K,Object(g.a)(Object(g.a)({},e),{},{onAddAbove:function(){return c(n)},onAddBelow:function(){return c(n+1)},dispatch:d}),e.id)})),!r.length&&Object(C.jsx)("button",{type:"button",onClick:function(){return c(0)},children:"+ New Story"})]},"task-stories-".concat(n.id))})):Object(C.jsx)(se,{},"activity-empty-tasks-".concat(n.id))}))})}),"release-".concat(e.id))}))]})},ye=o.c.div(pe||(pe=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  min-width: 100vw;\n  height: 100vh;\n  max-height: 100vh;\n"]))),me=o.c.header(xe||(xe=Object(u.a)(["\n  background: ",";\n  color: ",";\n"])),(function(e){return e.theme.header}),(function(e){return e.theme.accentText})),ge=o.c.section(Oe||(Oe=Object(u.a)(["\n  flex: 1;\n  overflow: auto;\n  padding-top: 0.5em;\n"])));function Ie(e){localStorage.setItem("map",JSON.stringify(e))}var ke=JSON.parse(localStorage.getItem("map"));var Ae=function(){var e=Object(c.useState)(b()),n=Object(f.a)(e,2),t=n[0],r=n[1];return Object(C.jsxs)(ye,{children:[Object(C.jsxs)(me,{children:["User Story Map",Object(C.jsx)("button",{type:"button",onClick:function(){localStorage.removeItem("map"),ke=null,r(b())},children:"Clear"})]}),Object(C.jsx)(ge,{children:Object(C.jsx)(ve,{map:ke,onMapUpdated:Ie},t)})]})};d.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsxs)(o.a,{theme:{background:"#ffffff",accent:"#7310fa",accentText:"#ffffff",subtle:"#cccccc",header:"#7310fa",columnWidth:"250px",cards:{background:"#ffffff",typeAccents:{activity:"#fac710",task:"#2d9bf0",story:"#18c427"}}},children:[Object(C.jsx)(l,{}),Object(C.jsx)(Ae,{})]})}),document.getElementById("root")),s()}},[[31,1,2]]]);
//# sourceMappingURL=main.9e774d65.chunk.js.map