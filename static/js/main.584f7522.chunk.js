(this["webpackJsonpuser-story-map"]=this["webpackJsonpuser-story-map"]||[]).push([[0],{31:function(e,t,n){"use strict";n.r(t);var r,c=n(1),a=n.n(c),i=n(11),d=n.n(i),s=n(2),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},u=n(3),l=Object(s.b)(r||(r=Object(u.a)(["\n  html {\n    box-sizing: border-box;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n    font-size: 18px;\n    line-height: 1.5;\n    display: flex;\n  }\n\n  textarea {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  }\n\n  body {\n    margin: 0;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  *, *:before, *:after {\n    box-sizing: inherit;\n  }\n"]))),f=n(7);function b(){return Math.random().toString(36).substr(2,9)}var p,j,h,x,y,O,v,m=n(4),I=n(16),k=n(5),g=n(15),C=n.n(g),w=n(0),A=s.c.div(p||(p=Object(u.a)(["\n  display: grid;\n  width: 294px;\n  grid-template-columns: 18px ",' 18px;\n  grid-template-rows: 18px min-content 18px;\n  grid-template-areas:\n    ". top ."\n    "left card right"\n    ". bottom .";\n  justify-items: center;\n  align-items: center;\n\n  &:hover, &:focus-within {\n    button {\n      visibility: visible;\n    }\n  }\n'])),(function(e){return e.theme.cardWidth})),S=s.c.article(j||(j=Object(u.a)(["\n  border: 1px solid ",";\n  border-left: 4px solid ",";\n  border-radius: 3px;\n  background: ",";\n  grid-area: card;\n  padding: 0.25em;\n  cursor: pointer;\n"])),(function(e){return e.theme.cards.typeAccents[e.type]}),(function(e){return e.theme.cards.typeAccents[e.type]}),(function(e){return e.theme.cards.background})),B=s.c.div(h||(h=Object(u.a)(["\n  grid-area: card;\n"]))),E=Object(s.c)(C.a).attrs((function(e){return{type:"text",value:e.title,placeholder:e.placeholder,maxLength:400}}))(x||(x=Object(u.a)(["\n  width: 100%;\n  max-width: 100%;\n  border: none;\n  outline: none;\n  font-size: 0.85em;\n  resize: none;\n"]))),F=s.c.button.attrs((function(e){return{type:"button"}}))(y||(y=Object(u.a)(["\n  transition: background-color .3s ease, color .3s ease;\n  background: transparent;\n  border: none;\n  color: ",";\n  font-size: 1em;\n  line-height: 1em;\n  padding: 0;\n  margin: 0.1em;\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  border-radius: 50%;\n  outline: none;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n"])),(function(e){return e.theme.subtle}),(function(e){return e.theme.accent}),(function(e){return e.theme.accentText}));function M(e){var t=e.onClick,n=Object(k.a)(e,["onClick"]);return Object(w.jsx)(F,Object(m.a)(Object(m.a)({},n),{},{onClick:t,children:"+"}))}var U=Object(s.c)(M)(O||(O=Object(u.a)(["\n  grid-area: ",";\n"])),(function(e){return"story"===e.type?"top":"left"})),D=Object(s.c)(M)(v||(v=Object(u.a)(["\n  grid-area: ",";\n"])),(function(e){return"story"===e.type?"bottom":"right"})),z="add-activity",N="add-task",R="add-story",T="update-card",J="delete-activity",L="delete-task",H="delete-story";function P(e){var t=e.id,n=e.title,r=e.type,a=e.onAddBefore,i=e.onAddAfter,d=e.dispatch,s=Object(c.useRef)(null);return Object(w.jsxs)(A,{children:[Object(w.jsxs)(S,{type:r,onClick:function(){return s.current.focus()},children:[Object(w.jsx)(E,{ref:s,title:n,placeholder:"New ".concat(r,"..."),onChange:function(e){d({type:T,cardId:t,title:e.target.value})}}),Object(w.jsx)("button",{type:"button",onClick:function(){d({type:"activity"===r?J:"task"===r?L:H,cardId:t})},children:"Delete"})]}),a&&Object(w.jsx)(U,{type:r,onClick:a}),i&&Object(w.jsx)(D,{type:r,onClick:i})]})}function W(e){var t=e.dispatch,n=Object(k.a)(e,["dispatch"]),r=n.index;return Object(w.jsx)(P,Object(m.a)(Object(m.a)({},n),{},{dispatch:t,onAddBefore:function(){return t({type:z,activityIndex:r})},onAddAfter:function(){return t({type:z,activityIndex:r+1})}}))}function q(e){var t=e.dispatch,n=Object(k.a)(e,["dispatch"]),r=n.activityId,c=n.index;return Object(w.jsx)(P,Object(m.a)(Object(m.a)({},n),{},{dispatch:t,onAddBefore:function(){return t({type:N,activityId:r,taskIndex:c})},onAddAfter:function(){return t({type:N,activityId:r,taskIndex:c+1})}}))}function G(e){var t=e.dispatch,n=Object(k.a)(e,["dispatch"]),r=n.releaseId,c=n.taskId,a=n.index;return Object(w.jsx)(P,Object(m.a)(Object(m.a)({},n),{},{dispatch:t,onAddBefore:function(){return t({type:R,releaseId:r,taskId:c,storyIndex:a})},onAddAfter:function(){return t({type:R,releaseId:r,taskId:c,storyIndex:a+1})}}))}function K(e){var t=e.children;return Object(w.jsx)(A,{children:Object(w.jsx)(B,{children:t})})}function Q(e,t,n,r){e.filter((function(e){return 0===e.id.indexOf(t)&&e.index>=n&&(!r||r(e))})).forEach((function(e){e.index+=1}))}function V(e){var t=0;e.sort((function(e,t){return e.index-t.index})).forEach((function(e){e.index=t++}))}function X(e,t){var n=[];return e.forEach((function(e,r){!0===t(e)&&n.push(r)})),n}var Y=function(e,t){var n=e.cards.findIndex((function(e){return e.id===t})),r=e.cards[n];return X(e.cards,(function(e){return e.taskId===t})).forEach((function(t){e.cards.splice(t,1)})),e.cards.splice(n,1),r};function Z(e,t){switch(t.type){case z:Q(e.cards,"activity",t.activityIndex),e.cards.push({id:"activity-".concat(b()),type:"activity",title:"",index:t.activityIndex});break;case N:Q(e.cards,"task",t.taskIndex,(function(e){return e.activityId===t.activityId})),e.cards.push({id:"task-".concat(b()),type:"task",activityId:t.activityId,title:"",index:t.taskIndex});break;case R:Q(e.cards,"story",t.storyIndex,(function(e){return e.taskId===t.taskId&&e.releaseId===t.releaseId})),e.cards.push({id:"story-".concat(b()),type:"story",releaseId:t.releaseId,taskId:t.taskId,title:"",index:t.storyIndex});break;case T:e.cards.find((function(e){return e.id===t.cardId})).title=t.title;break;case J:!function(e,t){var n=e.cards.findIndex((function(e){return e.id===t})),r=e.cards[n];X(e.cards,(function(e){return e.activityId===r.id})).map((function(t){return e.cards[t].id})).forEach((function(t){Y(e.cards,t)})),e.cards.splice(n,1)}(e,t.cardId),V(e.cards.filter((function(e){return"activity"===e.type})));break;case L:var n=Y(e,t.cardId);V(e.cards.filter((function(e){return e.activityId===n.activityId})));break;case H:var r=e.cards.findIndex((function(e){return e.id===t.cardId})),c=e.cards[r];e.cards.splice(r,1),V(e.cards.filter((function(e){return e.taskId===c.taskId&&e.releaseId===c.releaseId})));break;case"add-release":e.releases.splice(t.index,0,{id:b(),name:""});break;case"update-release":e.releases.find((function(e){return e.id===t.releaseId})).name=t.name;break;case"delete-release":!function(e,t){var n=e.releases.findIndex((function(e){return e.id===t})),r=e.releases[n<e.releases.length-1?n+1:n-1];e.releases.splice(n,1);var c=e.cards.filter((function(e){return e.releaseId===r.id})).length;e.cards.filter((function(e){return e.releaseId===t})).forEach((function(e){e.releaseId=r.id,e.index=c++}))}(e,t.releaseId);break;case"move-release-up":!function(e,t){var n=e.releases.findIndex((function(e){return e.id===t}));if(0!==n){var r=e.releases[n],c=e.releases[n-1];e.releases[n-1]=r,e.releases[n]=c}}(e,t.releaseId);break;case"move-release-down":!function(e,t){var n=e.releases.findIndex((function(e){return e.id===t}));if(n!==e.releases.length-1){var r=e.releases[n],c=e.releases[n+1];e.releases[n+1]=r,e.releases[n]=c}}(e,t.releaseId);break;default:throw new Error("Unknown action type")}}var $,_,ee,te,ne={releases:[{id:"release-".concat(b()),name:"Backlog"}],cards:[]},re=s.c.section($||($=Object(u.a)(["\n  border-top: 1px solid #cccccc;\n"])));function ce(e){var t=e.id,n=e.index,r=e.name,c=e.canDelete,a=e.children,i=e.dispatch;return Object(w.jsxs)(re,{children:[Object(w.jsxs)("header",{children:[Object(w.jsx)("input",{type:"text",value:r,autoFocus:!0,onChange:function(e){i({type:"update-release",releaseId:t,name:e.target.value})}}),Object(w.jsx)("button",{type:"button",onClick:function(){return i({type:"add-release",index:n})},children:"Add Release Above"}),Object(w.jsx)("button",{type:"button",onClick:function(){return i({type:"add-release",index:n+1})},children:"Add Release Below"}),Object(w.jsx)("button",{type:"button",onClick:function(){return i({type:"move-release-up",releaseId:t})},children:"Move Up"}),Object(w.jsx)("button",{type:"button",onClick:function(){return i({type:"move-release-down",releaseId:t})},children:"Move Down"}),c&&Object(w.jsx)("button",{type:"button",onClick:function(){return i({type:"delete-release",releaseId:t})},children:"Delete"})]}),Object(w.jsx)("div",{children:a})]})}var ae=s.c.div(_||(_=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  max-height: 100vh;\n  min-width: 100vw;\n  background: ",";\n  padding: 0.5em;\n"])),(function(e){return e.theme.background})),ie=s.c.div(ee||(ee=Object(u.a)(["\n  display: flex;\n"]))),de=s.c.div(te||(te=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n"])));function se(e,t){return e.filter((function(e){return 0===e.id.indexOf(t)})).sort((function(e,t){return e.index-t.index}))}function oe(e,t){return e.filter((function(e){return e.activityId===t.id}))}var ue,le,fe,be=function(e){var t=e.map,n=e.onMapUpdated,r=Object(I.a)(Z,t||ne),a=Object(f.a)(r,2),i=a[0],d=a[1],s=i.releases,o=i.cards,u=se(o,"activity"),l=se(o,"task"),b=se(o,"story");return Object(c.useEffect)((function(){n(i)}),[n,i,t]),Object(w.jsxs)(ae,{children:[Object(w.jsxs)(ie,{children:[0===u.length&&Object(w.jsx)(K,{children:Object(w.jsx)(M,{onClick:function(){return d({type:z,activityIndex:0})}})}),u.map((function(e){var t=oe(l,e);return Object(w.jsxs)(ie,{children:[Object(w.jsx)(W,Object(m.a)({dispatch:d},e)),t.map((function(t,n){return n>0&&Object(w.jsx)(K,{},"".concat(e.id,"-").concat(t.id,"-spacer"))}))]},e.id)}))]}),Object(w.jsx)(ie,{children:u.map((function(e){var t=oe(l,e);return Object(w.jsxs)(ie,{children:[0===t.length&&Object(w.jsx)(K,{children:Object(w.jsx)(M,{onClick:function(){return d({type:N,activityId:e.id,taskIndex:0})}})}),t.length>0&&t.map((function(e){return Object(w.jsx)(q,Object(m.a)({dispatch:d},e),e.id)}))]},"".concat(e.id,"-tasks"))}))}),s.map((function(e,t){var n=b.filter((function(t){return t.releaseId===e.id}));return Object(w.jsx)(ce,Object(m.a)(Object(m.a)({index:t,dispatch:d,canDelete:s.length>1},e),{},{children:Object(w.jsx)(ie,{children:u.map((function(t){return oe(l,t).map((function(t){var r=n.filter((function(e){return e.taskId===t.id}));return Object(w.jsxs)(de,{children:[0===r.length&&Object(w.jsx)(K,{children:Object(w.jsx)(M,{onClick:function(){return d({type:R,releaseId:e.id,taskId:t.id,storyIndex:0})}})}),r.length>0&&r.map((function(e){return Object(w.jsx)(G,Object(m.a)({dispatch:d},e),e.id)}))]},"".concat(t.id,"-stories"))}))}))})}),e.id)}))]})},pe=s.c.div(ue||(ue=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  min-width: 100vw;\n  height: 100vh;\n  max-height: 100vh;\n"]))),je=s.c.header(le||(le=Object(u.a)(["\n  background: ",";\n  color: ",";\n"])),(function(e){return e.theme.header}),(function(e){return e.theme.accentText})),he=s.c.section(fe||(fe=Object(u.a)(["\n  flex: 1;\n  overflow: auto;\n  padding-top: 0.5em;\n"])));function xe(e){localStorage.setItem("map",JSON.stringify(e))}var ye=JSON.parse(localStorage.getItem("map"));var Oe=function(){var e=Object(c.useState)(b()),t=Object(f.a)(e,2),n=t[0],r=t[1];return Object(w.jsxs)(pe,{children:[Object(w.jsxs)(je,{children:["User Story Map",Object(w.jsx)("button",{type:"button",onClick:function(){localStorage.removeItem("map"),ye=null,r(b())},children:"Clear"})]}),Object(w.jsx)(he,{children:Object(w.jsx)(be,{map:ye,onMapUpdated:xe},n)})]})};d.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsxs)(s.a,{theme:{background:"#ffffff",accent:"#7310fa",accentText:"#ffffff",subtle:"#cccccc",header:"#7310fa",cardWidth:"250px",cards:{background:"#ffffff",typeAccents:{activity:"#fac710",task:"#2d9bf0",story:"#18c427"}}},children:[Object(w.jsx)(l,{}),Object(w.jsx)(Oe,{})]})}),document.getElementById("root")),o()}},[[31,1,2]]]);
//# sourceMappingURL=main.584f7522.chunk.js.map