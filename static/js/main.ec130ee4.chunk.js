(this["webpackJsonpuser-story-map"]=this["webpackJsonpuser-story-map"]||[]).push([[0],{31:function(e,t,n){"use strict";n.r(t);var r,c=n(1),a=n.n(c),i=n(11),d=n.n(i),s=n(2),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},u=n(3),l=Object(s.b)(r||(r=Object(u.a)(["\n  html {\n    box-sizing: border-box;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n    font-size: 18px;\n    line-height: 1.5;\n    display: flex;\n  }\n\n  textarea {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  }\n\n  body {\n    margin: 0;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  *, *:before, *:after {\n    box-sizing: inherit;\n  }\n"]))),f=n(7);function b(){return Math.random().toString(36).substr(2,9)}var p,j,h,x,y,O,v,m,I=n(4),k=n(16),g=n(5),C=n(15),w=n.n(C),S=n(0),A=s.c.div(p||(p=Object(u.a)(["\n  /* position: relative; */\n  display: grid;\n  width: 294px;\n  grid-template-columns: 18px ",' 18px;\n  grid-template-rows: 18px min-content min-content 18px;\n  grid-template-areas:\n    ". top ."\n    "left card right"\n    ". toolbar ."\n    ". bottom .";\n  justify-items: center;\n  align-items: center;\n\n  &:hover, &:focus-within {\n    button {\n      visibility: visible;\n    }\n  }\n'])),(function(e){return e.theme.cardWidth})),B=s.c.article(j||(j=Object(u.a)(["\n  border: 1px solid ",";\n  border-left: 4px solid ",";\n  border-radius: 3px;\n  background: ",";\n  width: 100%;\n  grid-area: card;\n  padding: 0.25em;\n  cursor: pointer;\n"])),(function(e){return e.theme.cards.typeAccents[e.type]}),(function(e){return e.theme.cards.typeAccents[e.type]}),(function(e){return e.theme.cards.background})),E=s.c.div(h||(h=Object(u.a)(["\n  grid-area: card;\n"]))),F=Object(s.c)(w.a).attrs((function(e){return{type:"text",value:e.title,placeholder:e.placeholder,maxLength:400}}))(x||(x=Object(u.a)(["\n  width: 100%;\n  max-width: 100%;\n  border: none;\n  outline: none;\n  font-size: 0.85em;\n  resize: none;\n"]))),M=s.c.div(y||(y=Object(u.a)(["\n  grid-area: toolbar;\n  background: ",";\n  border: 1px solid ",";\n  border-left: 4px solid ",";\n  padding: 0.5em;\n  width: 100%;\n"])),(function(e){return e.theme.cards.background}),(function(e){return e.theme.subtle}),(function(e){return e.theme.subtle})),U=s.c.button.attrs((function(e){return{type:"button"}}))(O||(O=Object(u.a)(["\n  transition: background-color .3s ease, color .3s ease;\n  background: transparent;\n  border: none;\n  color: ",";\n  font-size: 1em;\n  line-height: 1em;\n  padding: 0;\n  margin: 0.1em;\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  border-radius: 50%;\n  outline: none;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n"])),(function(e){return e.theme.subtle}),(function(e){return e.theme.accent}),(function(e){return e.theme.accentText}));function D(e){var t=e.onClick,n=Object(g.a)(e,["onClick"]);return Object(S.jsx)(U,Object(I.a)(Object(I.a)({},n),{},{onClick:t,children:"+"}))}var z=Object(s.c)(D)(v||(v=Object(u.a)(["\n  grid-area: ",";\n"])),(function(e){return"story"===e.type?"top":"left"})),N=Object(s.c)(D)(m||(m=Object(u.a)(["\n  grid-area: ",";\n"])),(function(e){return"story"===e.type?"bottom":"right"})),R="add-activity",T="add-task",J="add-story",L="update-card",P="delete-activity",H="delete-task",W="delete-story",q="select-card",G="clear-selected-card";function K(e){var t=e.id,n=e.title,r=e.type,a=e.isSelected,i=e.onAddBefore,d=e.onAddAfter,s=e.dispatch,o=Object(c.useRef)(null);return Object(S.jsxs)(A,{children:[Object(S.jsx)(B,{type:r,onClick:function(e){e.stopPropagation(),o.current.focus(),s({type:q,cardId:t})},children:Object(S.jsx)(F,{ref:o,title:n,placeholder:"New ".concat(r,"..."),onChange:function(e){s({type:L,cardId:t,title:e.target.value})}})}),i&&Object(S.jsx)(z,{type:r,onClick:i}),d&&Object(S.jsx)(N,{type:r,onClick:d}),a&&Object(S.jsx)(M,{children:Object(S.jsx)("button",{type:"button",onClick:function(){s({type:"activity"===r?P:"task"===r?H:W,cardId:t})},children:"Delete"})})]})}function Q(e){var t=e.dispatch,n=Object(g.a)(e,["dispatch"]),r=n.index;return Object(S.jsx)(K,Object(I.a)(Object(I.a)({},n),{},{dispatch:t,onAddBefore:function(){return t({type:R,activityIndex:r})},onAddAfter:function(){return t({type:R,activityIndex:r+1})}}))}function V(e){var t=e.dispatch,n=Object(g.a)(e,["dispatch"]),r=n.activityId,c=n.index;return Object(S.jsx)(K,Object(I.a)(Object(I.a)({},n),{},{dispatch:t,onAddBefore:function(){return t({type:T,activityId:r,taskIndex:c})},onAddAfter:function(){return t({type:T,activityId:r,taskIndex:c+1})}}))}function X(e){var t=e.dispatch,n=Object(g.a)(e,["dispatch"]),r=n.releaseId,c=n.taskId,a=n.index;return Object(S.jsx)(K,Object(I.a)(Object(I.a)({},n),{},{dispatch:t,onAddBefore:function(){return t({type:J,releaseId:r,taskId:c,storyIndex:a})},onAddAfter:function(){return t({type:J,releaseId:r,taskId:c,storyIndex:a+1})}}))}function Y(e){var t=e.children;return Object(S.jsx)(A,{children:Object(S.jsx)(E,{children:t})})}function Z(e,t,n,r){e.filter((function(e){return 0===e.id.indexOf(t)&&e.index>=n&&(!r||r(e))})).forEach((function(e){e.index+=1}))}function $(e){var t=0;e.sort((function(e,t){return e.index-t.index})).forEach((function(e){e.index=t++}))}function _(e,t){var n=[];return e.forEach((function(e,r){!0===t(e)&&n.push(r)})),n}var ee=function(e,t){var n=e.cards.findIndex((function(e){return e.id===t})),r=e.cards[n];return _(e.cards,(function(e){return e.taskId===t})).forEach((function(t){e.cards.splice(t,1)})),e.cards.splice(n,1),r};function te(e,t){switch(t.type){case R:Z(e.cards,"activity",t.activityIndex),e.cards.push({id:"activity-".concat(b()),type:"activity",title:"",index:t.activityIndex});break;case T:Z(e.cards,"task",t.taskIndex,(function(e){return e.activityId===t.activityId})),e.cards.push({id:"task-".concat(b()),type:"task",activityId:t.activityId,title:"",index:t.taskIndex});break;case J:Z(e.cards,"story",t.storyIndex,(function(e){return e.taskId===t.taskId&&e.releaseId===t.releaseId})),e.cards.push({id:"story-".concat(b()),type:"story",releaseId:t.releaseId,taskId:t.taskId,title:"",index:t.storyIndex});break;case L:e.cards.find((function(e){return e.id===t.cardId})).title=t.title;break;case P:!function(e,t){var n=e.cards.findIndex((function(e){return e.id===t})),r=e.cards[n];_(e.cards,(function(e){return e.activityId===r.id})).map((function(t){return e.cards[t].id})).forEach((function(t){ee(e.cards,t)})),e.cards.splice(n,1)}(e,t.cardId),$(e.cards.filter((function(e){return"activity"===e.type})));break;case H:var n=ee(e,t.cardId);$(e.cards.filter((function(e){return e.activityId===n.activityId})));break;case W:var r=e.cards.findIndex((function(e){return e.id===t.cardId})),c=e.cards[r];e.cards.splice(r,1),$(e.cards.filter((function(e){return e.taskId===c.taskId&&e.releaseId===c.releaseId})));break;case q:e.selectedCardId=t.cardId;break;case G:e.selectedCardId=null;break;case"add-release":e.releases.splice(t.index,0,{id:b(),name:""});break;case"update-release":e.releases.find((function(e){return e.id===t.releaseId})).name=t.name;break;case"delete-release":!function(e,t){var n=e.releases.findIndex((function(e){return e.id===t})),r=e.releases[n<e.releases.length-1?n+1:n-1];e.releases.splice(n,1);var c=e.cards.filter((function(e){return e.releaseId===r.id})).length;e.cards.filter((function(e){return e.releaseId===t})).forEach((function(e){e.releaseId=r.id,e.index=c++}))}(e,t.releaseId);break;case"move-release-up":!function(e,t){var n=e.releases.findIndex((function(e){return e.id===t}));if(0!==n){var r=e.releases[n],c=e.releases[n-1];e.releases[n-1]=r,e.releases[n]=c}}(e,t.releaseId);break;case"move-release-down":!function(e,t){var n=e.releases.findIndex((function(e){return e.id===t}));if(n!==e.releases.length-1){var r=e.releases[n],c=e.releases[n+1];e.releases[n+1]=r,e.releases[n]=c}}(e,t.releaseId);break;default:throw new Error("Unknown action type")}}var ne,re,ce,ae,ie={releases:[{id:"release-".concat(b()),name:"Backlog"}],cards:[]},de=s.c.section(ne||(ne=Object(u.a)(["\n  border-top: 1px solid #cccccc;\n"])));function se(e){var t=e.id,n=e.index,r=e.name,c=e.canDelete,a=e.children,i=e.dispatch;return Object(S.jsxs)(de,{children:[Object(S.jsxs)("header",{children:[Object(S.jsx)("input",{type:"text",value:r,autoFocus:!0,onChange:function(e){i({type:"update-release",releaseId:t,name:e.target.value})}}),Object(S.jsx)("button",{type:"button",onClick:function(){return i({type:"add-release",index:n})},children:"Add Release Above"}),Object(S.jsx)("button",{type:"button",onClick:function(){return i({type:"add-release",index:n+1})},children:"Add Release Below"}),Object(S.jsx)("button",{type:"button",onClick:function(){return i({type:"move-release-up",releaseId:t})},children:"Move Up"}),Object(S.jsx)("button",{type:"button",onClick:function(){return i({type:"move-release-down",releaseId:t})},children:"Move Down"}),c&&Object(S.jsx)("button",{type:"button",onClick:function(){return i({type:"delete-release",releaseId:t})},children:"Delete"})]}),Object(S.jsx)("div",{children:a})]})}var oe=s.c.div(re||(re=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  max-height: 100vh;\n  min-width: 100vw;\n  background: ",";\n  padding: 0.5em;\n"])),(function(e){return e.theme.background})),ue=s.c.div(ce||(ce=Object(u.a)(["\n  display: flex;\n"]))),le=s.c.div(ae||(ae=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n"])));function fe(e,t){return e.filter((function(e){return 0===e.id.indexOf(t)})).sort((function(e,t){return e.index-t.index}))}function be(e,t){return e.filter((function(e){return e.activityId===t.id}))}var pe,je,he,xe=function(e){var t=e.map,n=e.onMapUpdated,r=Object(k.a)(te,t||ie),a=Object(f.a)(r,2),i=a[0],d=i.releases,s=i.cards,o=i.selectedCardId,u=a[1],l=fe(s,"activity"),b=fe(s,"task"),p=fe(s,"story");return Object(c.useEffect)((function(){n({releases:d,cards:s})}),[n,d,s,t]),Object(S.jsxs)(oe,{onClick:function(){return u({type:G})},children:[Object(S.jsxs)(ue,{children:[0===l.length&&Object(S.jsx)(Y,{children:Object(S.jsx)(D,{onClick:function(){return u({type:R,activityIndex:0})}})}),l.map((function(e){var t=be(b,e);return Object(S.jsxs)(ue,{children:[Object(S.jsx)(Q,Object(I.a)(Object(I.a)({dispatch:u},e),{},{isSelected:o===e.id})),t.map((function(t,n){return n>0&&Object(S.jsx)(Y,{},"".concat(e.id,"-").concat(t.id,"-spacer"))}))]},e.id)}))]}),Object(S.jsx)(ue,{children:l.map((function(e){var t=be(b,e);return Object(S.jsxs)(ue,{children:[0===t.length&&Object(S.jsx)(Y,{children:Object(S.jsx)(D,{onClick:function(){return u({type:T,activityId:e.id,taskIndex:0})}})}),t.length>0&&t.map((function(e){return Object(S.jsx)(V,Object(I.a)({dispatch:u,isSelected:o===e.id},e),e.id)}))]},"".concat(e.id,"-tasks"))}))}),d.map((function(e,t){var n=p.filter((function(t){return t.releaseId===e.id}));return Object(S.jsx)(se,Object(I.a)(Object(I.a)({index:t,dispatch:u,canDelete:d.length>1},e),{},{children:Object(S.jsx)(ue,{children:l.map((function(t){return be(b,t).map((function(t){var r=n.filter((function(e){return e.taskId===t.id}));return Object(S.jsxs)(le,{children:[0===r.length&&Object(S.jsx)(Y,{children:Object(S.jsx)(D,{onClick:function(){return u({type:J,releaseId:e.id,taskId:t.id,storyIndex:0})}})}),r.length>0&&r.map((function(e){return Object(S.jsx)(X,Object(I.a)({dispatch:u,isSelected:o===e.id},e),e.id)}))]},"".concat(t.id,"-stories"))}))}))})}),e.id)}))]})},ye=s.c.div(pe||(pe=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  min-width: 100vw;\n  height: 100vh;\n  max-height: 100vh;\n"]))),Oe=s.c.header(je||(je=Object(u.a)(["\n  background: ",";\n  color: ",";\n"])),(function(e){return e.theme.header}),(function(e){return e.theme.accentText})),ve=s.c.section(he||(he=Object(u.a)(["\n  flex: 1;\n  overflow: auto;\n  padding-top: 0.5em;\n"])));function me(e){localStorage.setItem("map",JSON.stringify(e))}var Ie=JSON.parse(localStorage.getItem("map"));var ke=function(){var e=Object(c.useState)(b()),t=Object(f.a)(e,2),n=t[0],r=t[1];return Object(S.jsxs)(ye,{children:[Object(S.jsxs)(Oe,{children:["User Story Map",Object(S.jsx)("button",{type:"button",onClick:function(){localStorage.removeItem("map"),Ie=null,r(b())},children:"Clear"})]}),Object(S.jsx)(ve,{children:Object(S.jsx)(xe,{map:Ie,onMapUpdated:me},n)})]})};d.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsxs)(s.a,{theme:{background:"#ffffff",accent:"#7310fa",accentText:"#ffffff",subtle:"#cccccc",header:"#7310fa",cardWidth:"250px",cards:{background:"#ffffff",typeAccents:{activity:"#fac710",task:"#2d9bf0",story:"#18c427"}}},children:[Object(S.jsx)(l,{}),Object(S.jsx)(ke,{})]})}),document.getElementById("root")),o()}},[[31,1,2]]]);
//# sourceMappingURL=main.ec130ee4.chunk.js.map